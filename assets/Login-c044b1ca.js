import{g as k,m as S,a as x,b as w,c as C,d as B,e as I,p as R,u as P,t as y,f as F,h as T,i as L,r as f,j as z,k as d,l as E,n as M,o as t,_ as N,q as U,s as q,v as H,w as j,x as D,y as G,z as $,A,B as a,F as J,C as K,V as O,D as h,E as V,G as Q,H as W,I as X,J as Y,K as Z}from"./index-61303be4.js";import{V as ee,a as te,b as g,c as ae,d as se}from"./VMain-e496c687.js";const oe=k()({name:"VFooter",props:{app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...S(),...x(),...w(),...C(),...B({tag:"footer"}),...I()},setup(e,c){let{slots:v}=c;const{themeClasses:m}=R(e),{backgroundColorClasses:b,backgroundColorStyles:n}=P(y(e,"color")),{borderClasses:u}=F(e),{elevationClasses:s}=T(e),{roundedClasses:r}=L(e),p=f(32),{resizeRef:_}=z(l=>{l.length&&(p.value=l[0].target.clientHeight)}),i=d(()=>e.height==="auto"?p.value:parseInt(e.height,10)),{layoutItemStyles:o}=E({id:e.name,order:d(()=>parseInt(e.order,10)),position:d(()=>"bottom"),layoutSize:i,elementSize:d(()=>e.height==="auto"?void 0:i.value),active:d(()=>e.app),absolute:y(e,"absolute")});return M(()=>t(e.tag,{ref:_,class:["v-footer",m.value,b.value,u.value,s.value,r.value],style:[n.value,e.app?o.value:void 0]},v)),{}}});const le=e=>(X("data-v-81e1f4b9"),e=e(),Y(),e),ne=le(()=>Z("div",{class:"login-txt"},"登入",-1)),ue={__name:"Login",setup(e){const c=U(),v=q(),m=H(),b=j(),n=f(""),u=f(""),s=f(!1),r=f(!1),p=d(()=>!n.value||!u.value||s.value),_=async()=>{s.value=!0,await m.login({username:n,password:u}).then(()=>{if(s.value=!1,v.query.redirect)try{c.push({path:v.query.redirect});return}catch(i){c.push({name:"Portal"})}else c.push({name:"bd-register"})}).catch(i=>{b.showError({text:i})}),s.value=!1};return D(()=>{m.clearToken()}),G(()=>{m.clearToken()}),(i,o)=>($(),A(J,null,[t(ee,{class:"login-content"},{default:a(()=>[t(te,{class:"fill-height",fluid:""},{default:a(()=>[t(g,{class:"login-row","no-gutters":"",justify:"center"},{default:a(()=>[t(ae,{class:"form-col text-center"},{default:a(()=>[t(se,{onSubmit:K(_,["prevent"]),disabled:s.value},{default:a(()=>[t(O,{defaults:{VRow:{noGutters:!0},VTextField:{variant:"solo",density:"default"}}},{default:a(()=>[t(g,{class:"input-label"},{default:a(()=>[h("帳號")]),_:1}),t(V,{class:"username-text-field input-text",modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=l=>n.value=l),modelModifiers:{trim:!0}},null,8,["modelValue"]),t(g,{class:"input-label"},{default:a(()=>[h("密碼")]),_:1}),t(V,{class:"input-text",modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=l=>u.value=l),modelModifiers:{trim:!0},"append-inner-icon":r.value?"mdi-eye-off":"mdi-eye",type:r.value?"text":"password","onClick:appendInner":o[2]||(o[2]=l=>r.value=!r.value)},null,8,["modelValue","append-inner-icon","type"]),t(g,{class:"submit-btn-row"},{default:a(()=>[t(Q,{color:"primary",block:"",loading:s.value,disabled:W(p),type:"submit"},{default:a(()=>[ne]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),t(oe,{class:"login-footer"},{default:a(()=>[h("copyright © 2020 installments,Inc.")]),_:1})],64))}},de=N(ue,[["__scopeId","data-v-81e1f4b9"]]);export{de as default};
